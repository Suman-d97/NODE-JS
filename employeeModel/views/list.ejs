<!doctype html>
<html lang="en">

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Employee List</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css" rel="stylesheet">

</head>

<body class="bg-light">

<div class="container py-4">

  <div class="d-flex justify-content-between mb-4">

    <h3>Employee List</h3>

    <a href="/employee/add" class="btn btn-primary">
      Add Employee
    </a>

  </div>


  <div class="row">

    <% for(let employee of data) { %>

      <div class="col-md-4 mb-4">

        <div class="card h-100">

          <% if(employee.image) { %>

            <img src="/<%= employee.image %>" 
                 class="card-img-top" 
                 style="height:200px; object-fit:cover;">

          <% } else { %>

            <img src="https://cdn-icons-png.freepik.com/256/11136/11136505.png" 
                 class="card-img-top"
                 style="height:200px; object-fit:cover;">

          <% } %>


          <div class="card-body">

            <h5 class="card-title">
              <%= employee.name %>
            </h5>

            <p class="card-text">
              <strong>ID:</strong> <%= employee.employee_id %>
            </p>

            <p class="card-text">
              <strong>Email:</strong> <%= employee.contact.email %>
            </p>

            <p class="card-text">
              <strong>Phone:</strong> <%= employee.contact.phone %>
            </p>

            <p class="card-text">
              <strong>City:</strong> <%= employee.contact.city %>
            </p>

            <p class="card-text">

              <strong>Department:</strong>

              <% if (Array.isArray(employee.department.department_name)) { %>

                <%= employee.department.department_name.join(', ') %>

              <% } else { %>

                <%= employee.department.department_name %>

              <% } %>

            </p>

          </div>

          <div class="card-footer text-center">

            <a href="/employee/edit/<%=employee._id%>" 
               class="btn btn-success btn-sm">
               Update
            </a>

            <a href="/employee/delete/<%=employee._id%>" 
               class="btn btn-danger btn-sm"
               onclick="return confirm('Are you sure?')">
               Delete
            </a>

          </div>

        </div>

      </div>

    <% } %>

  </div>

</div>

</body>
</html>